<!DOCTYPE html>
<html>
<head>
    <title>Github Trend List</title>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
</head>
<body>
<div class="container">
    <div class="col-md-4"></div>
    <div class="col-md-4">
        <h1 data-filed="title">GitHub Trend List</h1>
        <ul id="trends"></ul>
        <div class="list-group">
        </div>
    </div>
</div>
</body>
</html>

<script src="//www.google.com/jsapi"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script>
    google.setOnLoadCallback(function () {
        $(function () {
            var trend = location.href.split("trends=")[1];
            console.log(trend)
            var update = function () {
                // $.get("http://localhost:8080/" + trend + "?key=abc", null, null, "json")
                $.get("http://localhost:8080/trends/?key=abc", null, null, "json")
                        .done(function (polls) {
                            var poll = polls[0];
                            $('#list-group').empty();
                            for (var o in poll.list) {
                                $('#trends').append(
                                        $("<a>").addClass("list-group-item").attr("href", "detail.html/?q=" + poll.list[o]).text(poll.list[o])
                                )
                            }
                            ;
                        });
            };
            update();
        });
    });
</script>
